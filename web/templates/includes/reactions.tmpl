<div class="reactions">
    {{if .LoggedIn}}
    <div class="reaction-picker">
        <input type="checkbox" id="reaction-toggle-{{.ID}}" class="reaction-toggle">

        <label for="reaction-toggle-{{.ID}}" class="reaction-overlay" aria-hidden="true"></label>

        <label for="reaction-toggle-{{.ID}}" class="reaction-add-btn" role="button" title="Add reaction" aria-label="Add reaction" aria-expanded="false" aria-haspopup="menu">
            <svg width="24px" height="24px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000" style="--darkreader-inline-color: var(--darkreader-text-000000, #e8e6e3);" data-darkreader-inline-color=""><path d="M8.5 7C8.22386 7 8 6.77614 8 6.5C8 6.22386 8.22386 6 8.5 6C8.77614 6 9 6.22386 9 6.5C9 6.77614 8.77614 7 8.5 7Z" fill="#000000" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="--darkreader-inline-fill: #000000; --darkreader-inline-stroke: #000000;" data-darkreader-inline-fill="" data-darkreader-inline-stroke=""></path><path d="M15.5 7C15.2239 7 15 6.77614 15 6.5C15 6.22386 15.2239 6 15.5 6C15.7761 6 16 6.22386 16 6.5C16 6.77614 15.7761 7 15.5 7Z" fill="#000000" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="--darkreader-inline-fill: #000000; --darkreader-inline-stroke: #000000;" data-darkreader-inline-fill="" data-darkreader-inline-stroke=""></path><path d="M10 11H14M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="--darkreader-inline-stroke: #000000;" data-darkreader-inline-stroke=""></path></svg>
        </label>

        <div class="reaction-dropdown" role="menu" aria-labelledby="reaction-toggle-{{.ID}}" aria-hidden="true">
            <form method="post" action="{{.Action}}" class="reaction-options" role="grid" aria-label="Select a reaction">
                <button name="emoji" value="👍" class="reaction-option" role="gridcell" title="Thumbs up" aria-label="Add thumbs up reaction">👍</button>
                <button name="emoji" value="❤️" class="reaction-option" role="gridcell" title="Love" aria-label="Add love reaction">❤️</button>
                <button name="emoji" value="😄" class="reaction-option" role="gridcell" title="Laugh" aria-label="Add laugh reaction">😄</button>
                
                <button name="emoji" value="😮" class="reaction-option" role="gridcell" title="Wow" aria-label="Add wow reaction">😮</button>
                <button name="emoji" value="😢" class="reaction-option" role="gridcell" title="Sad" aria-label="Add sad reaction">😢</button>
                <button name="emoji" value="😡" class="reaction-option" role="gridcell" title="Angry" aria-label="Add angry reaction">😡</button>
                
                <button name="emoji" value="🔥" class="reaction-option" role="gridcell" title="Fire" aria-label="Add fire reaction">🔥</button>
                <button name="emoji" value="💯" class="reaction-option" role="gridcell" title="100" aria-label="Add 100 percent reaction">💯</button>
                <button name="emoji" value="🎉" class="reaction-option" role="gridcell" title="Party" aria-label="Add party reaction">🎉</button>
                
                <button name="emoji" value="👏" class="reaction-option" role="gridcell" title="Clap" aria-label="Add clap reaction">👏</button>
                <button name="emoji" value="🤔" class="reaction-option" role="gridcell" title="Thinking" aria-label="Add thinking reaction">🤔</button>
                <button name="emoji" value="🙏" class="reaction-option" role="gridcell" title="Pray" aria-label="Add pray reaction">🙏</button>
            </form>
        </div>
    </div>
    {{end}}

    {{if .ReactionCounters}}
        <div class="reaction-counters">
            {{range .ReactionCounters}}
                {{if $.LoggedIn}}
                <form method="post" action="{{$.Action}}" class="reaction-counter-form">
                    <button name="emoji" value="{{.Emoji}}" 
                            class="reaction-item{{if .Reacted}} reacted{{end}}" 
                            title="{{.Count}} {{.Emoji}} reactions - Click to {{if .Reacted}}remove{{else}}add{{end}}"
                            aria-label="{{.Count}} {{.Emoji}} reactions, {{if .Reacted}}you reacted, click to remove{{else}}click to add your reaction{{end}}"
                            aria-pressed="{{.Reacted}}">
                        {{.Emoji}} {{.Count}}
                    </button>
                </form>
                {{else}}
                    <span class="reaction-item" title="{{.Count}} {{.Emoji}} reactions" aria-label="{{.Count}} {{.Emoji}} reactions">
                        {{.Emoji}} {{.Count}}
                    </span>
                {{end}}
            {{end}}
        </div>
    {{end}}
</div>