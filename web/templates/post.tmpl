{{template "layout.tmpl" .}}

{{define "content"}}
<main class="container">
    {{template "post-card.tmpl" (dict
        "Post" .Post
        "LoggedIn" .LoggedIn
    )}}

    <h2>Comments</h2>

    {{if .LoggedIn}}
    <form action="/posts/{{.Post.ID}}/comments" method="post" enctype="multipart/form-data" class="comment-form">
        <textarea name="content" placeholder="Write something..." aria-label="Content"></textarea>

        <input type="file" name="attachment" accept="image/*" aria-label="Attachment">

        <button>
            <svg width="24px" height="24px" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000" style="--darkreader-inline-color: #e8e6e3;" data-darkreader-inline-color=""><path d="M22.1525 3.55321L11.1772 21.0044L9.50686 12.4078L2.00002 7.89795L22.1525 3.55321Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="--darkreader-inline-stroke: #000000;" data-darkreader-inline-stroke=""></path><path d="M9.45557 12.4436L22.1524 3.55321" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="--darkreader-inline-stroke: #000000;" data-darkreader-inline-stroke=""></path></svg>
            <span>Comment</span>
        </button>
    </form>
    {{end}}

    {{if not .Comments.Items}}
        <p>No comments yet</p>
    {{else}}
        <div role="feed">
            {{range .Comments.Items}}
                {{template "comment-card.tmpl" (dict
                    "Comment" .
                    "LoggedIn" $.LoggedIn
                )}}
            {{end}}
        </div>
    {{end}}
</main>
{{end}}