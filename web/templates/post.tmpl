{{template "layout.tmpl" .}}

{{define "content"}}
<main class="container">
    {{template "post-card.tmpl" (dict
        "Post" .Post
        "LoggedIn" .LoggedIn
    )}}

    <h2>Comments</h2>

    {{if .LoggedIn}}
    <form action="/posts/{{.Post.ID}}/comments" method="post">
        <div>
            <textarea name="content" placeholder="Say something..." aria-label="Content" required></textarea>
        </div>

        <button>Comment</button>
    </form>

    <br>
    {{end}}

    {{if not .Comments.Items}}
        <p>No comments yet</p>
    {{else}}
        <div role="feed">
            {{range .Comments.Items}}
                {{template "comment-card.tmpl" (dict
                    "Comment" .
                    "LoggedIn" $.LoggedIn
                )}}
            {{end}}
        </div>
    {{end}}
</main>
{{end}}